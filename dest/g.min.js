/*! G 2013-07-12 */
(function(t){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),String.prototype.substitute=function(r,n,o){return"string"==typeof r&&n?r.replace(o||/\\?\{([^{}]+)\}/g,function(r,o){return"\\"===r.charAt(0)?r.slice(1):n[o]===t?EMPTY:n[o]}):r},Array.prototype.indexOf||(Array.prototype.indexOf=function(t){for(var r=0,n=this.length;n>r;++r)if(this[r]===t)return r;return-1}),Array.prototype.lastIndexOf||(Array.prototype.lastIndexOf=function(t){for(var r=this.length-1;r>=0&&this[r]!==t;r--);return r}),Array.prototype.filter||(Array.prototype.filter=function(t,r){for(var n=this.length,o=[],e=0;n>e;e++)e in this&&t.call(r,this[e],e,this)&&o.push(val);return o}),Array.prototype.map||(Array.prototype.map=function(t,r){for(var n=this.length,o=Array(n),e=0;n>e;e++)o[e]=t.call(r,this[e],e,this);return o}),Array.prototype.reduce||(Array.prototype.reduce=function(t,r){var n,o=0,e=this.length>>>0,i=!1;for(r&&(n=r,i=!0);e>o;++o)o in this&&i?n=t(n,this[o],o,this):(n=this[o],i=!0);return n}),Array.prototype.some||(Array.prototype.some=function(t,r){for(var n=this.length,o=0;n>o;o++)if(o in arr&&t.call(r,arr[o],o,arr))return!0;return!1}),Array.prototype.every||(Array.prototype.every=function(t,r){for(var n=this.length>>>0,o=0;n>o;o++)if(o in this&&!fun.call(r,this[o],o,this))return!1;return!0}),Array.prototype.forEach||(Array.prototype.forEach=function(t,r){for(var n=0,o=this.length;o>n;++n)n in this&&t.call(r,this[n],n,this)}),Array.prototype.unique=function(){return this.filter.call(this,function(t,r){return this.indexOf(t)==r})},Function.prototype.before=function(t){var r=this;return function(){return t.apply(this,arguments)===!1?!1:r.apply(this,arguments)}},Function.prototype.after=function(t){var r=this;return function(){var n=r.apply(this,arguments);return n===!1?!1:(t.apply(this,arguments),n)}}})();var Class=function(){function t(n){return this instanceof t||!a(n)?void 0:r(n)}function r(r){return r.extend=t.extend,r.implement=n,r}function n(r){var n,o;for(n in r)o=r[n],t.Mutators.hasOwnProperty(n)?t.Mutators[n].call(this,o):this.prototype[n]=o}function o(){}function e(t,r,n){for(var o in r)if(r.hasOwnProperty(o)){if(n&&-1===u(n,o))continue;"prototype"!==o&&(t[o]=r[o])}}t.create=function(o,i){function p(){o.apply(this,arguments),this.constructor===p&&this.initialize&&this.initialize.apply(this,arguments)}return a(o)||(i=o,o=null),i||(i={}),o||(o=i.Extends||t),i.Extends=o,o!==t&&e(p,o,o.StaticsWhiteList),n.call(p,i),r(p)},t.extend=function(r){return r||(r={}),r.Extends=this,t.create(r)},t.Mutators={Extends:function(t){var r=this.prototype,n=i(t.prototype);e(n,r),n.constructor=this,this.prototype=n,this.superclass=t.prototype},Implements:function(t){s(t)||(t=[t]);for(var r,n=this.prototype;r=t.shift();)e(n,r.prototype||r)},Statics:function(t){e(this,t)}};var i=Object.__proto__?function(t){return{__proto__:t}}:function(t){return o.prototype=t,new o},p=Object.prototype.toString,s=Array.isArray||function(t){return"[object Array]"===p.call(t)},a=function(t){return"[object Function]"===p.call(t)},u=Array.prototype.indexOf;return t}();